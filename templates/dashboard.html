{% extends 'partials/base.html' %}

{% load static %}

{% block page-content %}
    <main>
        <div class='empty'></div>
        <div class="posts">
            <div class='make-post-container'>
                <a href="{% url 'make post' %}">Make a post</a>
                <form action="{% url 'make post' %}" method="post" enctype="multipart/form-data" class="form post-form">
                    {% csrf_token %}
                    {{ form }}
{#                    <textarea id="outlined-basic" placeholder="Make a post..."></textarea>#}
{#                    <div class="post-actions">#}
{#                        <button class='upload-btn'>Image</button>#}
                        <button type='submit' class="submit-post-btn">Post</button>
{#                    </div>#}
                </form>
            </div>
            {% for post in posts %}
            <div class="post-container">
                <div class="post-info">
                    <div class="user-img">
                         <a href="{% url 'profile page' pk=post.user.pk %}">
                             <img src="{{ post.user.profile_picture.url }}" alt="image of {{ user.username }}" class="profile-pic-user">
                         </a>
{#                        <i class="fa-solid fa-user fa-2x"></i>#}
                    </div>
                    <div class="post-user-and-date">
                        <p class="post-author">{{ post.user.first_name }} {{ post.user.last_name }}</p>
                        <p class="post-date">{{ post.publication_date }}</p>
                    </div>
                </div>
                <div class="post-content">
                    <p class="post-text">
                        {{ post.content }}
                    </p>
                </div>
                {% if post.photo %}
{#                <div class="images-container" >#}
                    <img class="post-img" width="200"
                            src="/media/{{ post.photo }}"
                            alt="sample photo"
                    />

{#                </div>#}
                {% endif %}
                <div class="support-btn-and-comments-count">
                    <div class="support-btn">
                            <a href="{% url 'support post' post.id %}">
                                {% if post.supportpost_set.all %}
                                    <i class="fa-solid fa-thumbs-down"></i>
                                {% else %}
                                    <i class="fa-solid fa-thumbs-up fa-lg thumb-icon"></i>
                                {% endif %}
                            </a>
                        <span class="times-supported">{{ post.supportpost_set.count }}</span>
                    </div>
                    <p class="comments-count" onClick={handleClickComments}>
                        <a href="">
                            <span class="comments-num">{{ post.comment_set.count }}</span> comments
                        </a>
                    </p>
                </div>
                <div class="comments-container">

                    <div class="comments">
                        {% for comment in post.comment_set.all %}
                        {% include "partials/comment.html" with comment=comment %}
                            {% endfor %}
                    </div>

                </div>
                <div class="make-comment-container">
                    <form action="{% url 'comment post' post_id=post.pk %}" method="post" >
{#                        <input placeholder="Add a comment..."/>#}
                        {{ comment_form }}
                        {% csrf_token %}
                        <div class="post-actions">
                            <button class="make-comment-btn">
                                Post
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            {#        <Post />#}
            {#        <Post />#}
        </div>
        {% endfor %}
        {#      <UsersList />#}
    <div class="users-list" id="users-list">
        <h2>Users in your group:</h2>
        <ul>
            <li class="user-list-item">
                <div class="user-name-picture">
                    <i class="fa-solid fa-user fa-2x"></i>
                <p>John Doe</p>
                </div>
                <i class="fa-solid fa-message fa-2x"></i>
            </li>
            <li class="user-list-item">
                <div class="user-name-picture">
                    <i class="fa-solid fa-user fa-2x"></i>
                <p>John Doe</p>
                </div>
                <i class="fa-solid fa-message fa-2x"></i>
            </li>
            <li class="user-list-item">
                <div class="user-name-picture">
                    <i class="fa-solid fa-user fa-2x"></i>
                <p>John Doe</p>
                </div>
                <i class="fa-solid fa-message fa-2x"></i>
            </li>
        </ul>
    </div>
    <button id="users-btn">Users</button>
    </main>

{% endblock %}

{% block script %}
    <script src="{% static 'scripts/app.js' %}" type="text/javascript"></script>
{% endblock %}